exec_always {
    exec XDG_CURRENT_DESKTOP=sway
    exec XDG_SESSION_TYPE=wayland

    systemctl --user start xdg-desktop-portal-wlr
    systemctl --user start xdg-desktop-portal
}
# Logo key. Use Mod1 for Alt.
set $mod Mod1
# Home row direction keys, like vim
set $left h
set $down j
set $up k
set $right l

set $term kitty  
set $menu rofi -show drun
set $file-manager thunar 
set $web-browser firefox

# Set XDG_CURRENT_DESKTOP for proper Wayland support
    exec --no-startup-id dbus-update-activation-environment --systemd WAYLAND_DISPLAY XDG_CURRENT_DESKTOP=sway
# Start xdg-desktop-portal services (ensure wlr starts first)
    exec --no-startup-id /usr/lib/xdg-desktop-portal-wlr &
    exec --no-startup-id /usr/lib/xdg-desktop-portal -r

### Sov
    exec rm -f /tmp/sovpipe && mkfifo /tmp/sovpipe && tail -f /tmp/sovpipe | sov -t 500
### Colorscheme
# High Contrast / Neon Theme
        set $bg0    #000000
        set $bg1    #111111
        set $fg     #ffffff
        set $gray   #404040
#set $gray   #bbbbbb
        set $red    #ff5555
        set $green  #55ff55
        set $yellow #ffff55
        set $blue   #5555ff
        set $magenta #ff55ff
        #set $cyan   #55ffff
        set $cyan   #59cbf0
        set $electric-cyan #59faff
        #set $electric-cyan #70ffff
        set $white  #ffffff
        set $orange #ffaa00  
        set $rose-gold #ff6ec3
# Everforest colors
        #set $bg0  #2d353b
        #set $bg1  #343f44
        #set $fg   #d3c6aa
        #set $green #a7c080
        #set $blue  #7fbbb3
        #set $yellow #dbbc7f
        #set $gray  #868d80
     
# Pastel TTY Colors
        #set $bg0    #282828
        #set $bg1    #323232
        #set $fg     #e0e0e0
        #set $green  #b5e8a9
        #set $blue   #a5d8ff
        #set $yellow #ffe6a7
        #set $gray   #a0a0a0
        #set $red    #ff9a9e
        #set $magenta #dda0dd
        #set $cyan   #a3e8e8
        #set $white  #ffffff
        #set $orange #ffbb8a
     
        #set $bg0    #282828
        #set $bg1    #3c3836
        #set $fg     #ebdbb2
        #set $green  #b8bb26
        #set $blue   #83a598
        #set $yellow #fabd2f
        #set $gray   #928374
        #set $red    #fb4934
        #set $magenta #d3869b
        #set $cyan   #8ec07c
        #set $white  #ebdbb2
        #set $orange #fe8019
    
    

### Output configuration
output HDMI-A-1 resolution 1920x1080 position 1920,0 
output eDP-1 scale 1.2

### Idle configuration
#
#screen timout 
#exec swayidle -w \
#    timeout 600 'swaylock \
#        --color 2d353b \
#        --inside-color 3a454a \
#        --inside-clear-color 5c6a72 \
#        --inside-ver-color 5a524c \
#        --inside-wrong-color 543a3a \
#        --ring-color 7a8478 \
#        --ring-clear-color a7c080 \
#        --ring-ver-color dbbc7f \
#        --ring-wrong-color e67e80 \
#        --key-hl-color d699b6 \
#        --bs-hl-color e69875 \
#        --separator-color 2d353b \
#        --text-color d3c6aa \
#        --text-clear-color d3c6aa \
#        --text-ver-color d3c6aa \
#        --text-wrong-color d3c6aa \
#        --indicator-radius 100 \
#        --indicator-thickness 10 \
#        --font "Iosevka Nerd Font Mono"' \
#    timeout 600 'swaymsg output "*" power off' \
#    resume 'swaymsg output "*" power on' \
#    before-sleep 'swaylock -f -c 000000'



### Font Configuration
    font pango:JetBrainsMono Nerd Font 14
### Autostart
exec autotiling -l 2   ## Sway Automatic Tiling

## Clipboard
    exec wl-paste --type text --watch cliphist store &
    exec wl-paste --type image --watch cliphist store &
# NetworkManager
    exec nm-applet
## Waybar
    exec pkill -x waybar || waybar &


## Mako Notification
    exec mako

## Autostart Applications
    exec swaymsg "workspace 1; exec kitty"
##exec swaymsg "workspace 2; exec firefox"
##################################################################################################################
# Float + resize + center focused window
    bindsym Mod4+Shift+f floating enable, resize set 785 440, move position center

# Window Rules
        for_window [app_id="yad"] floating enable
    # Volume manager
        for_window [app_id="org.pulseaudio.pavucontrol"] floating enable, move position center, resize set 600 400
    # Bluetooth Manager
        for_window [app_id="blueman-manager"] floating enable, move position center, resize set 600 400
    # KDE Connect
        for_window [app_id="org.kde.kdeconnect.app"] floating enable, move position center, resize set 600 400


    # tmux-picker script
        for_window [app_id="tmux-picker"] floating enable, resize set 600 200, move position center

    # Thunar file manager
        for_window [app_id="Thunar"] floating enable, move position center, resize set 700 500
        for_window [app_id="thunar"] floating enable, move position center, resize set 700 500

    # Wallpaper Picker script
        for_window [app_id="WallpaperPicker"] floating enable, resize set 800 200, move position center, move to scratchpad

    # Screen recorder script
        for_window [app_id="ScreenRecorder"] floating enable, resize set 700 400, move position center, move to scratchpad
    # Moosic-Player
        for_window [app_id="Moosic_Player"] floating enable, resize set 500 300, move position center

### Key bindings
# Basics:

# Toggle Thunar scratchpad visibility
    bindsym $mod+y exec sh -c 'pgrep -x thunar >/dev/null && pkill -x thunar || thunar'

    bindsym $mod+b exec $web-browser
# Kill focused window
    bindsym $mod+shift+q kill
# Logout
# Start your launcher
    bindsym $mod+d exec $menu

# Reload the configuration file
    bindsym $mod+Shift+c reload

# Switch the current container between different layout styles
    bindsym $mod+shift+s layout stacking
    bindsym $mod+shift+t layout toggle


# Manual Tiling Modes
    bindsym $mod+p splith
    bindsym $mod+o splitv


# Make the current focus fullscreen
    bindsym $mod+f fullscreen

# Toggle the current focus between tiling and floating mode
    bindsym $mod+Shift+space floating toggle

# Swap focus between the tiling area and the floating area
    bindsym $mod+space focus mode_toggle

#
# Scratchpad:
#
# Sway has a "scratchpad", which is a bag of holding for windows.
# You can send windows there and get them back later.

# Move the currently focused window to the scratchpad
    bindsym $mod+Shift+minus move scratchpad

# Show the next scratchpad window or hide the focused scratchpad window.
# If there are multiple scratchpad windows, this command cycles through them.
    bindsym $mod+equal scratchpad show
# Drag floating windows by holding down $mod and left mouse button.
# Resize them with right mouse button + $mod.
# Despite the name, also works for non-floating windows.
# Change normal to inverse to use left mouse button for resizing and right
# mouse button for dragging.
# Resize windows with left mouse button while holding $mod
    floating_modifier $mod normal
    bindsym $mod+button1 resize
bindsym --whole-window button2 exec "pgrep waybar && pkill waybar || waybar"


# Exit sway (logs you out of your Wayland session)
##    bindsym $mod+Shift+e exec swaynag -t warning -m 'You pressed the exit shortcut. Do you really want to exit sway? This will end your Wayland session.' -B 'Yes, exit sway' 'swaymsg exit'
    bindsym $mod+Ctrl+Shift+e exec swaymsg exit
#CUSTOM BINDINGS
    bindsym $mod+shift+W exec ~/.config/shell/scripts/my_scripts/reset-amdgpu.sh
# ~/.config/sway/config
    bindsym $mod+a exec "pkill -x waybar || waybar &"
# Reload Waybar
    bindsym $mod+shift+a exec pkill -SIGUSR2 waybar 
# Start a terminal
    bindsym $mod+semicolon exec $term
# Launch kitty with tmux
    bindsym $mod+shift+semicolon exec kitty --class kitty-tmux --title Terminal -e tmux new-session -A -s main
# Kill dev bloatware
    bindsym $mod+shift+delete exec ~/.config/sway/scripts/lock-suspend.sh


    bindsym $mod+v exec cliphist list | rofi -dmenu -p "Clipboard" -theme ~/.config/rofi/themes/squared-everforest.rasi | cliphist decode | wl-copy
########################################################################################
    #redundant
    # Emoji Picker
    #bindsym $mod+s exec rofi -show emoji -modi emoji -matching regex -sorting-method levenshtein

########################################################################################
    # Lock
# ScreenRecorder
bindsym $mod+g exec sh -c 'swaymsg -t get_tree | grep -q "ScreenRecorder" || $term --class ScreenRecorder --title ScreenRecorder ~/.config/shell/scripts/record/record.sh; swaymsg [app_id="ScreenRecorder"] scratchpad show,resize set 700 400, move position center'

# WallpaperPicker
bindsym $mod+c exec sh -c 'swaymsg -t get_tree | grep -q "WallpaperPicker" || kitty --class WallpaperPicker --name WallpaperPicker --title WallpaperPicker ~/.config/sway/scripts/live-wall.sh; swaymsg [app_id="WallpaperPicker"] scratchpad show, resize set 800 200, move position center'
# Moving around:
#
    # Move your focus around
    bindsym $mod+$left focus left
    bindsym $mod+$down focus down
    bindsym $mod+$up focus up
    bindsym $mod+$right focus right
    # Or use $mod+[up|down|left|right]
    bindsym $mod+Left focus left
    bindsym $mod+Down focus down
    bindsym $mod+Up focus up
    bindsym $mod+Right focus right

    # Move the focused window with the same, but add Shift
    bindsym $mod+Shift+$left move left
    bindsym $mod+Shift+$down move down
    bindsym $mod+Shift+$up move up
    bindsym $mod+Shift+$right move right
    # Ditto, with arrow keys
    bindsym $mod+Shift+Left move left
    bindsym $mod+Shift+Down move down
    bindsym $mod+Shift+Up move up
    bindsym $mod+Shift+Right move right
#
# Workspaces:
#
bindsym --no-repeat $mod+1 workspace number 1; exec "echo 1 > /tmp/sovpipe" &
bindsym --no-repeat $mod+2 workspace number 2; exec "echo 1 > /tmp/sovpipe" &
bindsym --no-repeat $mod+3 workspace number 3; exec "echo 1 > /tmp/sovpipe" &
bindsym --no-repeat $mod+4 workspace number 4; exec "echo 1 > /tmp/sovpipe" &
bindsym --no-repeat $mod+5 workspace number 5; exec "echo 1 > /tmp/sovpipe" &
bindsym --no-repeat $mod+6 workspace number 6; exec "echo 1 > /tmp/sovpipe" &
bindsym --no-repeat $mod+7 workspace number 7; exec "echo 1 > /tmp/sovpipe" &
bindsym --no-repeat $mod+8 workspace number 8; exec "echo 1 > /tmp/sovpipe" &
bindsym --no-repeat $mod+9 workspace number 9; exec "echo 1 > /tmp/sovpipe" &
bindsym --no-repeat $mod+0 workspace number 10; exec "echo 1 > /tmp/sovpipe" &

bindsym --release $mod+1 exec "echo 0 > /tmp/sovpipe" &
bindsym --release $mod+2 exec "echo 0 > /tmp/sovpipe" &
bindsym --release $mod+3 exec "echo 0 > /tmp/sovpipe" &
bindsym --release $mod+4 exec "echo 0 > /tmp/sovpipe" &
bindsym --release $mod+5 exec "echo 0 > /tmp/sovpipe" &
bindsym --release $mod+6 exec "echo 0 > /tmp/sovpipe" &
bindsym --release $mod+7 exec "echo 0 > /tmp/sovpipe" &
bindsym --release $mod+8 exec "echo 0 > /tmp/sovpipe" &
bindsym --release $mod+9 exec "echo 0 > /tmp/sovpipe" &
bindsym --release $mod+0 exec "echo 0 > /tmp/sovpipe" &

    # Move focused container to workspace
    bindsym $mod+Shift+1 move container to workspace number 1
    bindsym $mod+Shift+2 move container to workspace number 2
    bindsym $mod+Shift+3 move container to workspace number 3
    bindsym $mod+Shift+4 move container to workspace number 4
    bindsym $mod+Shift+5 move container to workspace number 5
    bindsym $mod+Shift+6 move container to workspace number 6
    bindsym $mod+Shift+7 move container to workspace number 7
    bindsym $mod+Shift+8 move container to workspace number 8
    bindsym $mod+Shift+9 move container to workspace number 9
    bindsym $mod+Shift+0 move container to workspace number 10


# Note: workspaces can have any name you want, not just numbers.
    # We just use 1-10 as the default.
#
# Layout stuff:
#

#
# Resizing containers:
#
mode "resize" {
    # left will shrink the containers width
    # right will grow the containers width
    # up will shrink the containers height
    # down will grow the containers height
    bindsym $left resize shrink width 10px
    bindsym $down resize shrink height 10px
    bindsym $up resize grow height 10px
    bindsym $right resize grow width 10px

    # Ditto, with arrow keys
    bindsym Left resize shrink width 10px
    bindsym Down resize shrink height 10px
    bindsym Up resize grow height 10px
    bindsym Right resize grow width 10px

    # Diagonal grow/shrink
    bindsym g resize grow width 10px; resize grow height 10px
    bindsym s resize shrink width 10px; resize shrink height 10px

    # Return to default mode
    bindsym Return mode "default"
    bindsym Escape mode "default"
}
bindsym $mod+r mode "resize"
bindsym Mod4+r mode "resize"


#########################################################################################################################
# Utilities:
    # Special keys to adjust volume via PulseAudio
    bindsym --locked XF86AudioMute exec pactl set-sink-mute \@DEFAULT_SINK@ toggle
    bindsym --locked XF86AudioLowerVolume exec pactl set-sink-volume \@DEFAULT_SINK@ -5%
    bindsym --locked XF86AudioRaiseVolume exec pactl set-sink-volume \@DEFAULT_SINK@ +5%
    bindsym --locked XF86AudioMicMute exec pactl set-source-mute \@DEFAULT_SOURCE@ toggle
    # Special keys to adjust brightness via brightnessctl
    bindsym --locked XF86MonBrightnessDown exec brightnessctl set 5%-
    bindsym --locked XF86MonBrightnessUp exec brightnessctl set 5%+

    # Special key to take a screenshot with grim
    bindsym Print exec --no-startup-id ~/.config/sway/scripts/screenshot.sh region
    bindsym Shift+Print exec --no-startup-id ~/.config/sway/scripts/screenshot.sh full

    bindsym XF86AudioPlay exec sh -c 'mpc toggle && notify-send "Play/Pause" "$(mpc status)"'
bindsym XF86AudioStop exec sh -c ' mpc shuffle && notify-send "MPD" "Playlist shuffled" '
    bindsym XF86AudioNext exec sh -c 'mpc next && notify-send "Next Track" "$(mpc current)"'
    bindsym XF86AudioPrev exec sh -c 'mpc prev && notify-send "Previous Track" "$(mpc current)"'

# Toggle pavucontrol
    bindsym XF86PickUpPhone exec sh -c 'pkill pavucontrol || pavucontrol'

# Toggle bluetooth manager
    bindsym XF86HangUpPhone exec sh -c 'pkill blueman-manager || blueman-manager'
include @sysconfdir@/sway/config.d/*
#########################################################################################################################

## Sway Borders
# Focused window: bright blue with clear text
client.focused   $cyan $bg1 $white $magenta $electric-cyan
# Unfocused window: minimal gray-on-black
client.unfocused $gray $bg0 $gray $gray $gray
# Urgent (alert) window: hot red border
client.urgent    $red $bg1 $white $red $red

# Borders and Gaps.
    gaps inner 4
    gaps outer 4

    default_border pixel 1
    default_floating_border pixel 1
    
    titlebar_padding 8 2
    titlebar_border_thickness 2
###############################################################################################################################################################
input * {
    xkb_options "caps:escape"
    repeat_delay 300
    repeat_rate 40

}
input "type:touchpad" {
    tap enabled                   # Tap to click
    natural_scroll enabled        # Scroll like mobile
    dwt enabled                   # Disable while typing (DWT)
    #accel_profile "adaptive"          # Optional: "flat" = constant speed
    accel_profile "flat"          # Optional: "flat" = constant speed
    pointer_accel 0.4            # Adjust pointer speed (-1 to 1)
    scroll_method "two_finger"   # (optional: default is two_finger)
}
focus_follows_mouse no

#####################################################

bindsym Mod4+1 move position 5 0
bindsym Mod4+2 move position 795 0 
bindsym Mod4+9 move position 5 445
bindsym Mod4+0 move position 795 445
bindsym Mod4+5 move position center
